{"ts":1348053647107,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var dochub_url = \"http://dochub.io\";\n\nHooks.addMenuItem(\"Go/Search on dochub.io\", \"cmd-ctrl-h\", function () {\n\tRecipe.run(function(r) {\n\t\tvar wordrange = r.wordRangeForRange(r.selection);\n\t\tvar word = r.textInRange(wordrange);\t\n\t\t\n\t\tshowPopover(word, wordrange);\n\t\t\n\t});\n});\n\nfunction showPopover (word, wordPosition) {\n\tvar popover = new Popover(Editor.current(), wordPosition);\n\t\n\tvar currentLanguage = getLanguage();\n\t\n\tif(currentLanguage == \"unkown\") {\n\t\tAlert.show(\"Unkown Language\", \"This language is not kown by dochub.io\");\n\t} else {\n\t\tpopover.size = {width: 800, height: 500};\t\n\t\tpopover.url = dochub_url + \"/#\" + currentLanguage + \"/\" + word;\t\n\t\tpopover.run();\t\n\t}\n}\n\nfunction getLanguage () {\n\tvar scope = Document.current().rootScope();\n\t\n\tvar knownLanguages = [\"js\", \"php\", \"css\", \"html\"];\n\t\n\tvar array = scope.split(\".\");\n\tvar scopeLanguage = \"unkown\";\n\t\n\tknownLanguages.forEach(function(element, index, array) {\n\t\tvar indexOfResult = array.indexOf(element);\n\t\tAlert.show(\"Debug\", element);\n\t\t\n\t\tif(indexOfResult > -1) {\n\t\t\tscopeLanguage = element;\n\t\t}\n\t});\n\t\n\t//@TODO: if scope is js also search in dom and jquery\n\tif(scopeLanguage == \"js\") scopeLanguage = \"javascript\";\n\t\n\treturn scopeLanguage;\n}"]],"start1":0,"start2":0,"length1":0,"length2":1212}]],"length":1212}
